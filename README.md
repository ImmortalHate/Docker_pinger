# Docker-pinger

## Описание проекта

**Docker-pinger** — это система мониторинга Docker-контейнеров, которая автоматически обнаруживает запущенные контейнеры, измеряет их «пинг» (время отклика) и передаёт результаты в backend для дальнейшей обработки. Система позволяет выбирать способ передачи данных: через брокер очередей (RabbitMQ) или напрямую через HTTP. Дополнительно проект включает фронтенд для визуализации данных, а также Nginx как реверс‑прокси для маршрутизации запросов.

## Функциональность

- **Автоматическое обнаружение контейнеров:**  
  Pinger использует Docker API для получения списка всех контейнеров (запущенных и остановленных) без необходимости ручного задания их списка.

- **Пинг контейнеров:**  
  Для каждого обнаруженного контейнера выполняется попытка установления TCP-соединения (по умолчанию на порт 80) с целью замера времени отклика.

- **Передача данных:**  
  Результаты пинга (IP-адрес, статус, время отклика, время проверки) отправляются в backend. Вы можете выбрать способ отправки:
  - Через **RabbitMQ** (асинхронно) – если USE_BROKER=true.
  - Через **HTTP POST** напрямую к backend – если USE_BROKER=false.

- **Backend API:**  
  Backend-сервис (на Go с использованием Gin и GORM) принимает данные, сохраняет их в базе PostgreSQL и предоставляет HTTP API для получения актуальной информации.

- **Фронтенд:**  
  Фронтенд-приложение (на базе Vite, React и TypeScript) регулярно запрашивает данные с backend и отображает их в динамической таблице.

- **Nginx:**  
  Используется как реверс‑прокси для маршрутизации запросов. Запросы, начинающиеся с `/api/`, направляются на backend, а все остальные – на фронтенд.

## Стек технологий

- **Backend:**
  - Язык: Go (версия 1.23.4)
  - Фреймворк: Gin
  - ORM: GORM
  - Паттерн: Repository
  - База данных: PostgreSQL

- **Pinger:**
  - Язык: Go (версия 1.23.4)
  - Использует Docker API для обнаружения контейнеров
  - RabbitMQ (опционально) для асинхронной передачи данных

- **Broker:**
  - RabbitMQ (с Management UI)

- **Frontend:**
  - Библиотека: React (с использованием TypeScript)
  - Инструмент сборки: Vite
  - Раздача через: Nginx

- **Реверс‑прокси:**
  - Nginx (на базе образа nginx:alpine)

- **Контейнеризация:**
  - Docker, docker-compose



  ## Инструкции по запуску

### 1. Настройка переменных окружения

Создайте файл **.env** в корневой папке со следующим содержимым (отредактируйте при необходимости):

```dotenv
# Database настройки (для backend)
DB_HOST=postgres
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=pingdb
DB_PORT=5432

# HTTP сервер backend
SERVER_PORT=8080

# Интервал пинга (например, 10s)
PING_INTERVAL=10s

# URL для отправки данных pinger (используется при прямой отправке через HTTP)
BACKEND_URL=http://localhost:8080

# Использовать брокер RabbitMQ для отправки данных (true или false)
USE_BROKER=false

# URL для подключения к RabbitMQ (используется, если USE_BROKER=true)
RABBITMQ_URL=amqp://guest:guest@broker:5672/

# URL для фронтенда (обязательно с префиксом VITE_)
VITE_API_URL=http://localhost:8080



Сборка и запуск с помощью docker-compose
В корневой папке проекта выполните: docker-compose up --build
